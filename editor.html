<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RyxIDE Editor</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/vs/editor/editor.main.min.css">
    <link rel="stylesheet" href="/node_modules/@xterm/xterm/css/xterm.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <header>
            <h1><i class="fas fa-code"></i><span id="editor-project-name">Project</span></h1>
            <div class="header-controls">
                <a class="header-button" href="index.html" title="Back to Dashboard"><i class="fas fa-arrow-left"></i><span class="sr-only">Back to Dashboard</span></a>
                <button id="save-project-button" class="header-button primary"><i class="fas fa-save"></i>Save</button>
                <select id="theme-selector" class="header-select" title="Select Theme"></select>
                <button id="find-button" class="header-button" title="Find"><i class="fas fa-search"></i></button>
                <button id="replace-button" class="header-button" title="Replace"><i class="fas fa-exchange-alt"></i></button>
                <div class="goto-line-container">
                    <input id="goto-line-input" type="number" min="1" placeholder="Line" title="Go to Line">
                    <button id="goto-line-button" class="header-button"><i class="fas fa-level-down-alt"></i></button>
                </div>
                <button id="run-button" class="header-button primary"><i class="fas fa-play"></i>Run</button>
                <a id="external-sandbox-link" class="header-button external-link" title="Open in External Sandbox" target="_blank"><i class="fas fa-external-link-alt"></i>External</a>
                <a class="header-button" href="changelog.html" title="Changelog"><i class="fas fa-book"></i><span class="sr-only">Changelog</span></a>
                <a class="header-button" href="credits.html" title="Credits"><i class="fas fa-info-circle"></i><span class="sr-only">Credits</span></a>
            </div>
        </header>
        <main id="editor-view">
            <div id="editor-main-content">
                <section id="file-pane">
                    <h4><i class="fas fa-folder"></i>Files</h4>
                    <ul id="file-list"></ul>
                    <div id="file-actions">
                        <button id="new-file-button" title="New File"><i class="fas fa-file"></i></button>
                        <button id="rename-file-button" title="Rename File"><i class="fas fa-edit"></i></button>
                        <button id="delete-file-button" class="danger" title="Delete File"><i class="fas fa-trash"></i></button>
                    </div>
                </section>
                <section id="editor-tabs-area">
                    <div class="tab-bar">
                        <button class="tab-button active" data-tab="editor"><i class="fas fa-code"></i>Editor</button>
                        <button class="tab-button" data-tab="terminal"><i class="fas fa-terminal"></i>Terminal</button>
                        <button class="tab-button" data-tab="ai-chat"><i class="fas fa-robot"></i>AI Chat</button>
                    </div>
                    <div id="editor-tab-content" class="tab-content active">
                        <div id="editor-container"></div>
                    </div>
                    <div id="terminal-tab-content" class="tab-content">
                        <div id="terminal-container"></div>
                    </div>
                    <div id="ai-chat-tab-content" class="tab-content">
                        <div id="ai-chat-interface">
                            <div class="ai-chat-controls">
                                <select id="ai-mode-selector" title="AI Mode">
                                    <option value="chat">Chat</option>
                                    <option value="code">Code</option>
                                    <option value="debug">Debug</option>
                                    <option value="explain">Explain</option>
                                </select>
                                <button id="ai-new-chat-button"><i class="fas fa-plus"></i>New Chat</button>
                                <button id="ai-clear-chat-button" class="danger"><i class="fas fa-trash"></i>Clear</button>
                            </div>
                            <div id="ai-chat-messages"></div>
                            <div id="ai-chat-input-area">
                                <textarea id="ai-chat-input" placeholder="Ask RyxAI..."></textarea>
                                <button id="ai-send-button" class="primary"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="side-pane">
                    <div id="preview-pane">
                        <iframe id="preview-frame"></iframe>
                    </div>
                    <div id="output-console-container" style="display: none;">
                        <h4><i class="fas fa-list"></i>Output</h4>
                        <pre id="output-console"></pre>
                    </div>
                </section>
            </div>
        </main>
        <footer>
            <p>RyxIDE &copy; 2025</p>
            <p id="credits">Built with <a href="credits.html">love</a>.</p>
            <p id="status-indicator"></p>
        </footer>
        <div id="modal-backdrop" class="modal-hidden">
            <div id="new-file-modal" class="modal-content modal-hidden">
                <h2><i class="fas fa-file"></i>New File</h2>
                <label for="new-file-name">File Name</label>
                <input type="text" id="new-file-name" placeholder="e.g., index.html">
                <div class="modal-actions">
                    <button id="new-file-cancel-button">Cancel</button>
                    <button id="new-file-create-button" class="primary">Create</button>
                </div>
            </div>
            <div id="rename-file-modal" class="modal-content modal-hidden">
                <h2><i class="fas fa-edit"></i>Rename File</h2>
                <label for="rename-file-name">New File Name</label>
                <input type="text" id="rename-file-name" placeholder="e.g., index.html">
                <div class="modal-actions">
                    <button id="rename-file-cancel-button">Cancel</button>
                    <button id="rename-file-confirm-button" class="primary">Rename</button>
                </div>
            </div>
            <div id="ai-apply-modal" class="modal-content modal-hidden">
                <h2><i class="fas fa-code"></i>Apply AI Code</h2>
                <label for="ai-apply-file-selector">Target File</label>
                <select id="ai-apply-file-selector"></select>
                <pre id="ai-apply-code-preview"></pre>
                <div class="modal-actions">
                    <button id="ai-apply-cancel-button">Cancel</button>
                    <button id="ai-apply-confirm-button" class="primary">Apply</button>
                </div>
            </div>
            <div id="shortcuts-modal" class="modal-content modal-hidden">
                <h2><i class="fas fa-keyboard"></i>Shortcuts</h2>
                <ul id="shortcuts-list"></ul>
                <div class="modal-actions">
                    <button id="shortcuts-close-button" class="primary">Close</button>
                </div>
            </div>
        </div>
        <div id="loader-overlay" class="modal-hidden">
            <div id="loader-text"></div>
        </div>
    </div>
    <script src="/node_modules/@xterm/xterm/lib/xterm.js"></script>
    <script src="/node_modules/@xterm/addon-fit/lib/addon-fit.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/vs/loader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.12/marked.min.js"></script>
    <script async src="https://unpkg.com/@ruby/wasm-wasi@2.1.0/dist/browser.umd.js" onerror="console.warn('Ruby WASM failed to load.')"></script>
    <script src="common.js"></script>
    <script type="module" src="editor.js"></script>
    <script>require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/vs' } }); window.MonacoEnvironment = { getWorker: function (moduleId, label) { const workerBase = 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/'; const workerMap = { 'editorWorkerService': 'vs/editor/editor.worker.js', 'css': 'vs/language/css/css.worker.js', 'html': 'vs/language/html/html.worker.js', 'json': 'vs/language/json/json.worker.js', 'typescript': 'vs/language/typescript/ts.worker.js', 'javascript': 'vs/language/typescript/ts.worker.js' }; return new Worker(`${workerBase}${workerMap[label] || workerMap.editorWorkerService}`, { type: 'module' }); } };</script>
</body>
</html>
